
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Servicios técnicos cercanos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.1/mapbox-gl-geocoder.min.js"></script>
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.1/mapbox-gl-geocoder.css" />
  <script src="https://unpkg.com/@turf/turf@6.5.0/turf.min.js"></script>
  <style>
  html, body { height: 100%; margin: 0; padding: 0; }

  #map { position: absolute; top: 0; bottom: 0; width: 100%; }

  .filtros {
    position: absolute;
    top: 10px;
    left: 10px;
    background-color: white;
    padding: 10px;
    border-radius: 6px;
    z-index: 1;
    box-shadow: 0 0 5px rgba(0,0,0,0.3);
    font-family: sans-serif;
    font-size: 14px;
  }

  .filtros label {
    display: block;
    margin-top: 5px;
  }

  .filtros select {
    width: 200px;
    padding: 4px;
  }

  .geocoder {
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  width: 400px;
}

</style>

</head>
<body>
  <div class="filtros">
    <label for="provinciaFilter">Provincia:</label>
    <select id="provinciaFilter">
      <option value="">Todas las provincias</option>
    </select>

    <label for="ciudadFilter">Ciudad:</label>
    <select id="ciudadFilter">
      <option value="">Todas las ciudades</option>
    </select>
  </div>
  <div id="geocoder" class="geocoder"></div>
  <div id="map"></div>

  <script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoibmljb3BlbmFmbG9yIiwiYSI6ImNtY3Q5NGRnZDAybzUybHBrODR3aDQ3OWMifQ.JIQvtVoxOsfZQB5c7K-fMg';

    const servicePoints = [
      { name: 'Mecanica Huguito', provincia: 'Buenos Aires', ciudad: 'Chascomús', coords: [-37.1451508, -58.4871409] },
    { name: 'Acyca Rural', provincia: 'Buenos Aires', ciudad: 'Brandsen', coords: [-35.0359373, -58.7562265] },
    { name: 'Prestaciones eléctricas', provincia: 'Buenos Aires', ciudad: 'La Matanza', coords: [-34.6290107, -58.5307933] },
    { name: 'Electromecánica JAB', provincia: 'La Pampa', ciudad: 'General Pico', coords: [-35.0361088, -63.0129307] },
    { name: 'Todo Para Fumigar', provincia: 'Buenos Aires', ciudad: 'Morón', coords: [-34.6320193, -58.6607833] },
    { name: 'BAIRESMAQ', provincia: 'Buenos Aires', ciudad: 'Moreno', coords: [-34.5152144, -58.7441846] },
    { name: 'Ferreteria Industrial Alejandro', provincia: 'Buenos Aires', ciudad: 'Necochea', coords: [-36.8647471, -57.8827733] },
    { name: 'Casa Gallano', provincia: 'Buenos Aires', ciudad: 'San Clemente del Tuyú', coords: [-36.5921589, -56.6896045] },
    { name: 'X-tools', provincia: 'Buenos Aires', ciudad: 'Tres Arroyos', coords: [-38.5727047, -58.7297409] },
    { name: 'Quick Service Olavarria', provincia: 'Buenos Aires', ciudad: 'Olavarría', coords: [-36.9042101, -60.3065722] },
    { name: 'Reparaciones J&J', provincia: 'Buenos Aires', ciudad: 'Carlos Casares', coords: [-35.814463, -61.910108] },
    { name: 'Compresores Temperley', provincia: 'Buenos Aires', ciudad: 'Temperley', coords: [-34.7724257, -58.3826342] },
    { name: 'El Fede', provincia: 'Buenos Aires', ciudad: 'Pehuajó', coords: [-35.9662425, -62.7258451] },
    { name: 'Hidroneu', provincia: 'Buenos Aires', ciudad: 'San Pedro', coords: [-34.1122204, -59.0175448] },
    { name: 'Electromek', provincia: 'Catamarca', ciudad: 'San Fernando del Valle de Catamarca', coords: [-28.4764501, -65.7845592] },
    { name: 'La Casa del Repuesto', provincia: 'Catamarca', ciudad: 'San Fernando del Valle de Catamarca', coords: [-28.469581, -65.7795441] },
    { name: 'Vicente Service Oficial', provincia: 'Chaco', ciudad: 'Villa Ángela', coords: [-26.7850946, -60.4359737] },
    { name: 'Taller QHJ', provincia: 'Chaco', ciudad: 'Presidencia Roque Sáenz Peña', coords: [-27.5745086, -60.7180318] },
    { name: 'Servis Emanuel', provincia: 'Chaco', ciudad: 'Presidencia Roque Sáenz Peña', coords: [-27.5758266, -60.7136879] },
    { name: 'Felix Olazabal', provincia: 'Chubut', ciudad: 'Trelew', coords: [-43.2719077, -65.3138445] },
    { name: 'J L Mecanica Especializada', provincia: 'Córdoba', ciudad: 'Villa Carlos Paz', coords: [-31.6555151, -64.4137847] },
    { name: 'Hijos De Osvaldo Monti (HOM)', provincia: 'Córdoba', ciudad: 'Arroyito', coords: [-31.010387, -62.6735579] },
    { name: 'World Machine', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.4421998, -64.5036822] },
    { name: 'Casa Santos', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.4282154, -64.4961823] },
    { name: 'AVR TOOLS', provincia: 'Córdoba', ciudad: 'Río Ceballos', coords: [-31.4331269, -64.159612] },
    { name: 'Microcor Servicio Tecnico', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.4082537, -64.1816984] },
    { name: 'Hogar Service', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.410909, -64.1877649] },
    { name: 'Rozados Maquinarias', provincia: 'Córdoba', ciudad: 'Deán Funes', coords: [-30.7274706, -64.804784] },
    { name: 'Pagliaroli Rodolfo', provincia: 'Córdoba', ciudad: 'San Francisco', coords: [-32.6956371, -62.1136895] },
    { name: 'Servicios Sierras Chicas', provincia: 'Córdoba', ciudad: 'Unquillo', coords: [-31.1837169, -64.3039405] },
    { name: 'Electronica Rio Tercero', provincia: 'Córdoba', ciudad: 'Río Tercero', coords: [-32.1766541, -64.1130995] },
    { name: 'CF Servicio', provincia: 'Córdoba', ciudad: 'Río Tercero', coords: [-32.1735179, -64.1243271] },
    { name: 'Electromecanica Genesis', provincia: 'Córdoba', ciudad: 'Río Tercero', coords: [-32.1755751, -64.1247537] },
    { name: 'Electromecanica Nuñez', provincia: 'Córdoba', ciudad: 'Morteros', coords: [-31.4376387, -62.0763203] },
    { name: 'Motosierras Gondra', provincia: 'Córdoba', ciudad: 'La Carlota', coords: [-33.9138322, -64.3911639] },
    { name: 'Zaskar Bicicleteria', provincia: 'Córdoba', ciudad: 'Salsipuedes', coords: [-31.2951653, -64.2930932] },
    { name: 'Palvoc Servicios Electricos', provincia: 'Córdoba', ciudad: 'Las Varillas', coords: [-31.5551378, -63.5417119] },
    { name: 'Garcia Gerardo Repuestos', provincia: 'Corrientes', ciudad: 'Goya', coords: [-29.1586399, -59.2681707] },
    { name: 'Angel Abel Nievas', provincia: 'Corrientes', ciudad: 'Goya', coords: [-29.1629657, -59.2748815] },
    { name: 'Electronagy', provincia: 'Corrientes', ciudad: 'Paso de los Libres', coords: [-29.7133997, -57.1028382] },
    { name: 'Oscar Depretto Maquinarias', provincia: 'Corrientes', ciudad: 'Mercedes', coords: [-28.2579855, -58.6354285] },
    { name: 'Service Bolchinsky', provincia: 'Entre Ríos', ciudad: 'Concordia', coords: [-31.3911775, -58.0197654] },
    { name: 'Megaingenieria', provincia: 'Entre Ríos', ciudad: 'Paraná', coords: [-32.0443167, -60.3108882] },
    { name: 'Ferreteria Los Lapachos', provincia: 'Entre Ríos', ciudad: 'Gualeguaychú', coords: [-33.0155641, -58.5279309] },
    { name: 'Hein Maquinas y Servicios', provincia: 'Entre Ríos', ciudad: 'Villaguay', coords: [-31.6610272, -59.9106348] },
    { name: 'Tecnica Parana', provincia: 'Entre Ríos', ciudad: 'Paraná', coords: [-31.7670884, -60.5198707] },
    { name: 'Bobinados Anis', provincia: 'Entre Ríos', ciudad: 'Paraná', coords: [-31.7389457, -60.4993078] },
    { name: 'Nuevo Service', provincia: 'Entre Ríos', ciudad: 'Federal', coords: [-31.8568225, -59.0261593] },
    { name: 'System Formosa', provincia: 'Formosa', ciudad: 'Formosa', coords: [-26.1904595, -58.1690377] },
    { name: 'Audiovision Servicio Tecnico Electronico', provincia: 'La Pampa', ciudad: 'Santa Rosa', coords: [-36.6478301, -64.3309698] },
    { name: 'Bobinados Chamical', provincia: 'La Rioja', ciudad: 'Chamical', coords: [-30.3584724, -66.310283] },
    { name: 'Pato Bobinados', provincia: 'La Rioja', ciudad: 'Villa Unión', coords: [-29.1611279, -67.4962016] },
    { name: 'Linea Blanca', provincia: 'La Rioja', ciudad: 'La Rioja', coords: [-29.3937355, -66.8193044] },
    { name: 'NC Multiservicios', provincia: 'Mendoza', ciudad: 'San Rafael', coords: [-34.9789827, -67.6986126] },
    { name: 'REPSA', provincia: 'Mendoza', ciudad: 'Malargüe', coords: [-33.7650645, -69.0609174] },
    { name: 'Curt Franke S.A.', provincia: 'Misiones', ciudad: 'Eldorado', coords: [-26.561021, -54.7794153] },
    { name: 'Mario Luis Matsumoto', provincia: 'Misiones', ciudad: 'Posadas', coords: [-27.473858, -55.1022736] },
    { name: 'Electricidad Botz Blitz', provincia: 'Misiones', ciudad: 'Oberá', coords: [-26.8226938, -55.0230434] },
    { name: 'El Nahuel', provincia: 'Neuquén', ciudad: 'San Martín de los Andes', coords: [-40.1572103, -71.3524436] },
    { name: 'Dangui', provincia: 'Neuquén', ciudad: 'Villa La Angostura', coords: [-40.7656399, -71.6584814] },
    { name: 'Gabriel Salamida', provincia: 'Neuquén', ciudad: 'Bariloche', coords: [-41.1294893, -71.2860941] },
    { name: 'Casa Hartel y Barhen', provincia: 'Río Negro', ciudad: 'Viedma', coords: [-38.9945636, -64.095561] },
    { name: 'N.A.C Servicio', provincia: 'Salta', ciudad: 'Metán', coords: [-25.503997, -64.9657375] },
    { name: 'Rp Service', provincia: 'Salta', ciudad: 'Rosario de la Frontera', coords: [-24.8078952, -65.408222] },
    { name: 'Repuestera Guzman', provincia: 'Salta', ciudad: 'Rosario de la Frontera', coords: [-24.7942971, -65.4190035] },
    { name: 'Apunto servicios', provincia: 'Salta', ciudad: 'Tartagal', coords: [-22.5136918, -63.7982986] },
    { name: 'Lubel', provincia: 'San Luis', ciudad: 'Villa Mercedes', coords: [-33.6694816, -65.4492454] },
    { name: 'Corralon Dalmasso SRL', provincia: 'San Luis', ciudad: 'Villa Mercedes', coords: [-33.6610938, -65.4523253] },
    { name: 'Santa Cruz Bobinados', provincia: 'Santa Cruz', ciudad: 'Caleta Olivia', coords: [-46.4532576, -67.5237707] },
    { name: 'All Motors', provincia: 'Santa Cruz', ciudad: 'Río Gallegos', coords: [-51.6196179, -69.2956557] },
    { name: 'Tecno Maquinarias', provincia: 'Santa Fe', ciudad: 'Cañada de Gómez', coords: [-32.8175123, -61.3970886] },
    { name: 'ELECTROMAK', provincia: 'Santa Fe', ciudad: 'Rosario', coords: [-32.9311829, -60.6777954] },
    { name: 'Sumimaq Express SRL', provincia: 'Santa Fe', ciudad: 'Rosario', coords: [-32.9338708, -60.6668413] },
    { name: 'Endata SRL', provincia: 'Santa Fe', ciudad: 'Rosario', coords: [-32.9404408, -60.6521692] },
    { name: 'Strong', provincia: 'Santa Fe', ciudad: 'Esperanza', coords: [-31.5508291, -61.0741476] },
    { name: 'MCF Hidraulica', provincia: 'Santa Fe', ciudad: 'Santa Fe', coords: [-31.5749307, -60.7282976] },
    { name: 'Andrés de Dios Motoimplementos', provincia: 'Santa Fe', ciudad: 'Santa Fe', coords: [-31.6144418, -60.6935761] },
    { name: 'Construmec', provincia: 'Santa Fe', ciudad: 'Santa Fe', coords: [-31.686763, -60.7627988] },
    { name: 'Dobled33', provincia: 'Santa Fe', ciudad: 'Venado Tuerto', coords: [-33.7201582, -61.9896463] },
    { name: 'Ing. Raul Barchini', provincia: 'Santiago del Estero', ciudad: 'Santiago del Estero', coords: [-27.7858965, -64.2680295] },
    { name: 'Tecnihogar', provincia: 'Tierra del Fuego', ciudad: 'Ushuaia', coords: [-54.8094522, -68.338856] },
    { name: 'Mundo Electronico', provincia: 'Tucumán', ciudad: 'San Miguel de Tucumán', coords: [-26.8148736, -65.2212615] },
    { name: 'Comercial Colon', provincia: 'Tucumán', ciudad: 'San Miguel de Tucumán', coords: [-26.826558, -65.2328828] },
    { name: 'MOTEC', provincia: 'Buenos Aires', ciudad: 'Bahía Blanca', coords: [-38.7367482, -62.2534197] },
    { name: 'Dario Ruffini', provincia: 'Córdoba', ciudad: 'Arroyito', coords: [-31.1534602, -63.3994554] },
    { name: 'R.R Rodriguez', provincia: 'San Juan', ciudad: 'San Juan', coords: [-31.504553, -68.5968973] },
    { name: 'ToolService', provincia: 'Buenos Aires', ciudad: 'Villa Gesell', coords: [-37.1225828, -56.8937842] },
    { name: 'MC Servicio Técnico', provincia: 'Chaco', ciudad: 'Villa Ángela', coords: [-27.5700867, -60.7130483] },
    { name: 'Zeta Servicio', provincia: 'Chaco', ciudad: 'Presidencia Roque Sáenz Peña', coords: [-27.4150658, -59.0342265] },
    { name: 'Max Service', provincia: 'Corrientes', ciudad: 'Curuzú Cuatiá', coords: [-30.7673143, -57.9959348] },
    { name: 'Mugas Daniel', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.3994292, -64.1696341] },
    { name: 'BACOR', provincia: 'Córdoba', ciudad: 'San Francisco', coords: [-31.4240675, -62.0903298] },
    { name: 'Obras y Servicios Tucumán', provincia: 'Tucumán', ciudad: 'San Miguel de Tucumán', coords: [-26.84162, -65.1552729] },
    { name: 'JMA - Servicio Técnico', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.4060684, -64.1546398] },
    { name: 'Ezelectromecanica', provincia: 'La Pampa', ciudad: 'General Pico', coords: [-35.6593239, -63.7577887] },
    { name: 'MKFET', provincia: 'Chaco', ciudad: 'Resistencia', coords: [-27.4568545, -58.9850294] },
    { name: 'Distriber', provincia: 'Buenos Aires', ciudad: 'La Plata', coords: [-34.9204948, -57.9535657] },
    { name: 'Giuliano Hidraulicos', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.3577031, -64.1979095] },
    { name: 'El Obrador Alquiler y Reparacion de Herramientas', provincia: 'Buenos Aires', ciudad: 'La Plata', coords: [-34.9572629, -57.9569236] },
    { name: 'Compresores Marcato', provincia: 'Córdoba', ciudad: 'Villa María', coords: [-32.4166761, -63.2294486] },
    { name: 'Servicio Agustin', provincia: 'Chaco', ciudad: 'Resistencia', coords: [-27.4512789, -59.0064799] },
    { name: 'Bobinados J.A.', provincia: 'Córdoba', ciudad: 'San Francisco', coords: [-31.4314537, -62.0833585] },
    { name: 'Traful', provincia: 'Buenos Aires', ciudad: 'Tandil', coords: [-37.3227006, -59.1429068] },
    { name: 'Prediger Jardin Y Agro', provincia: 'Buenos Aires', ciudad: 'Coronel Suárez', coords: [-37.4674283, -61.9329663] },
    { name: 'Ferretear Service', provincia: 'Córdoba', ciudad: 'Villa María', coords: [-32.40786, -63.2430682] },
    { name: 'Bobinados Calvi', provincia: 'Buenos Aires', ciudad: 'Tandil', coords: [-37.3093273, -59.1788317] },
    { name: 'Soluciones Eléctricas', provincia: 'Córdoba', ciudad: 'Bell Ville', coords: [-33.2070395, -62.600829] },
    { name: 'GRC Eléctromecánica', provincia: 'Córdoba', ciudad: 'San Francisco', coords: [-31.4211715, -62.1092204] },
    { name: 'M&Q Service', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.4227266, -64.1889318] },
    { name: 'LS Service de Maquinarias', provincia: 'Mendoza', ciudad: 'San Rafael', coords: [-34.6254658, -68.3359463] },
    { name: 'LKR Servicio Tecnico', provincia: 'Buenos Aires', ciudad: 'Lanús', coords: [-34.7620238, -58.3785561] },
    { name: 'Bobinados Lerda', provincia: 'Córdoba', ciudad: 'Villa María', coords: [-32.9363007, -63.2457758] },
    { name: 'Servimaq San Pedro', provincia: 'Buenos Aires', ciudad: 'San Pedro', coords: [-33.6924859, -59.672285] },
    { name: 'FGC Service y Rental SH', provincia: 'Buenos Aires', ciudad: 'Hurlingham', coords: [-34.5145282, -58.7433285] },
    { name: 'Yard Tech', provincia: 'Buenos Aires', ciudad: 'Moreno', coords: [-34.6356354, -58.8493096] },
    { name: 'NDS Electromecánica', provincia: 'Buenos Aires', ciudad: 'San Martín', coords: [-34.6017262, -58.4706548] },
    { name: 'Tools service', provincia: 'Buenos Aires', ciudad: 'San Nicolás', coords: [-33.9046615, -60.5778364] },
    { name: 'Electromecánica Ferreira', provincia: 'Buenos Aires', ciudad: 'Avellaneda', coords: [-34.7846214, -58.2599133] },
    { name: 'Lc Electromecánica', provincia: 'Buenos Aires', ciudad: 'Lanús', coords: [-34.7609665, -58.6207232] },
    { name: 'ENCOAR Reparaciones', provincia: 'Buenos Aires', ciudad: 'Quilmes', coords: [-34.7691538, -58.1930085] },
    { name: 'Servimaq Neuquén', provincia: 'Neuquén', ciudad: 'Neuquén Capital', coords: [-38.9597731, -68.0679071] },
    { name: 'Quick Service Cordoba', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.4093065, -64.1772083] },
    { name: 'Ferretaria Industrial Norte', provincia: 'Salta', ciudad: 'Orán', coords: [-22.516955, -63.8017774] },
    { name: 'Electromecánica RT', provincia: 'Buenos Aires', ciudad: 'Morón', coords: [-34.6202672, -58.5500746] },
    { name: 'Machine Service', provincia: 'Entre Ríos', ciudad: 'Concordia', coords: [-32.2213553, -58.1457293] },
    { name: 'Ferretería Junin', provincia: 'Buenos Aires', ciudad: 'Junín', coords: [-34.6075009, -58.3963614] },
    { name: 'CKL ARGENTINA', provincia: 'Buenos Aires', ciudad: 'CABA', coords: [-34.599871, -58.405204] },
    { name: 'SERVIMAK', provincia: 'San Luis', ciudad: 'San Luis Capital', coords: [-33.2887536, -66.3294961] },
    { name: 'ELECTROPCMANIA Bandfield', provincia: 'Buenos Aires', ciudad: 'Banfield', coords: [-34.7613766, -58.4029459] },
    { name: 'ELECTROPCMANIA Lomas de Zamora', provincia: 'Buenos Aires', ciudad: 'Lomas de Zamora', coords: [-34.7526399, -58.3866781] },
    { name: 'MSI', provincia: 'Córdoba', ciudad: 'Villa María', coords: [-32.9142634, -62.4545284] },
    { name: 'TV Ragal', provincia: 'Santa Fe', ciudad: 'Santa Fe', coords: [-31.6115182, -60.7045288] },
    { name: 'Marchal Service', provincia: 'Buenos Aires', ciudad: 'Necochea', coords: [-38.5529738, -58.7352535] },
    { name: 'Oscar Service', provincia: 'Buenos Aires', ciudad: 'Mar del Plata', coords: [-38.0308445, -57.5869779] },
    { name: 'Servimaq Argentina', provincia: 'Río Negro', ciudad: 'General Roca', coords: [-39.0392924, -67.5783219] },
    { name: 'Orosco Servicio Técnico', provincia: 'Mendoza', ciudad: 'San Martín', coords: [-33.0408598, -68.8803975] },
    { name: 'ADM Servicio Técnico de Herramientas', provincia: 'Mendoza', ciudad: 'Godoy Cruz', coords: [-32.9626591, -68.7855433] },
    { name: 'SERVICE OFICIAL Guaymallen', provincia: 'Mendoza', ciudad: 'Guaymallén', coords: [-32.9287788, -68.7368214] },
    { name: 'SERVICE OFICIAL Godoy Cruz', provincia: 'Mendoza', ciudad: 'Godoy Cruz', coords: [-32.9278994, -68.8200972] },
    { name: 'Servicios ADAM', provincia: 'Buenos Aires', ciudad: 'Ezeiza', coords: [-34.9007183, -58.5641533] },
    { name: 'Electromecanica Martínez', provincia: 'Buenos Aires', ciudad: 'Moreno', coords: [-34.5818877, -58.7522977] },
    { name: 'Dina-Mac', provincia: 'Río Negro', ciudad: 'Bariloche', coords: [-41.0748219, -71.165787] },
    { name: 'Electromecánica Verón', provincia: 'Buenos Aires', ciudad: 'San Martín', coords: [-34.5932829, -58.4419149] },
    { name: 'Bombas Longchamps', provincia: 'Buenos Aires', ciudad: 'Longchamps', coords: [-34.8580008, -58.3748116] },
    { name: 'Reparaciones PM', provincia: 'Buenos Aires', ciudad: 'Moreno', coords: [-34.6655313, -58.7255154] },
    { name: 'REPARAMAQ', provincia: 'Santa Fe', ciudad: 'Rosario', coords: [-32.9676874, -60.6486581] },
    { name: 'ELECTROTECNICA KEHLER', provincia: 'San Luis', ciudad: 'San Luis Capital', coords: [-33.2879666, -66.3340542] },
    { name: 'PROMIND Temperley', provincia: 'Buenos Aires', ciudad: 'Temperley', coords: [-34.755642, -58.349294] },
    { name: 'PROMIND Almirante Brown', provincia: 'Buenos Aires', ciudad: 'Burzaco', coords: [-34.7665612, -58.3583001] },
    { name: 'PROMIND San Vicente', provincia: 'Buenos Aires', ciudad: 'San Vicente', coords: [-35.0357948, -58.413427] },
    { name: 'Bocha Electronica', provincia: 'Mendoza', ciudad: 'San Rafael', coords: [-34.6217647, -68.349414] },
    { name: 'Electro-Service Chascomus', provincia: 'Buenos Aires', ciudad: 'Chascomús', coords: [-35.5657597, -58.0272257] },
    { name: 'NDF SERVICE CÓRDOBA', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.4468168, -64.1205331] },
    { name: 'Centro de Servicios Técnicos Tucumán', provincia: 'Tucumán', ciudad: 'San Miguel de Tucumán', coords: [-26.839055, -65.2282911] },
    { name: 'InfoSOL', provincia: 'Buenos Aires', ciudad: 'CABA', coords: [-34.6035852, -58.4185188] },
    { name: 'PICHINCHA Servicios', provincia: 'Santa Fe', ciudad: 'Rosario', coords: [-32.9370166, -60.6574291] },
    { name: 'SENILUC SERVICIOS', provincia: 'Tucumán', ciudad: 'San Miguel de Tucumán', coords: [-26.7324791, -65.2670288] },
    { name: 'Puglioli Enzo Servicio Técnico', provincia: 'Mendoza', ciudad: 'San Martín', coords: [-32.920971, -68.8784255] },
    { name: 'STA Asistencia Técnica', provincia: 'Río Negro', ciudad: 'General Roca', coords: [-39.0170664, -67.6088836] },
    { name: 'EGA SERVICIOS', provincia: 'La Rioja', ciudad: 'La Rioja Capital', coords: [-29.4231089, -66.8348143] },
    { name: 'SERVITEC Maciel', provincia: 'Santa Fe', ciudad: 'Maciel', coords: [-32.4490189, -60.8909378] },
    { name: 'Servicios Tecnicos de Sergio Molinatti', provincia: 'Buenos Aires', ciudad: 'Luján', coords: [-34.4410266, -59.4477026] },
    { name: 'GP ELECTRÓNICA Y ELECTRICIDAD', provincia: 'Buenos Aires', ciudad: 'Junín', coords: [-34.5195144, -61.3913566] },
    { name: 'Lazer Electrónica', provincia: 'Tucumán', ciudad: 'San Miguel de Tucumán', coords: [-26.8374959, -65.2410568] },
    { name: 'TUCUMAN SERVICE', provincia: 'Tucumán', ciudad: 'San Miguel de Tucumán', coords: [-26.8337702, -65.232345] },
    { name: 'HIDRO-COMP', provincia: 'Tucumán', ciudad: 'San Miguel de Tucumán', coords: [-26.8155915, -65.2176494] },
    { name: 'Hijos De Osvaldo Monti (HOM) Arroyito', provincia: 'Córdoba', ciudad: 'Arroyito', coords: [-31.4238762, -63.0518859] },
    { name: 'Electrónica y Servicio', provincia: 'Misiones', ciudad: 'Posadas', coords: [-27.3933937, -55.9085172] },
    { name: 'ELECTRO SERVICE SA', provincia: 'Buenos Aires', ciudad: 'CABA', coords: [-34.5981218, -58.3785239] },
    { name: 'TOTAL SERVICE', provincia: 'Córdoba', ciudad: 'Río Cuarto', coords: [-33.1032575, -64.3279934] },
    { name: 'Licom Servicios', provincia: 'Jujuy', ciudad: 'San Salvador de Jujuy', coords: [-24.1852941, -65.3064017] },
    { name: 'El Galpon', provincia: 'Buenos Aires', ciudad: '9 de Julio', coords: [-35.8164407, -61.8919855] },
    { name: 'JMJ Service Integral Mantenimiento', provincia: 'Río Negro', ciudad: 'Viedma', coords: [-40.8124275, -63.0045285] },
    { name: 'TeVeSur', provincia: 'Neuquén', ciudad: 'Neuquén Capital', coords: [-38.9591112, -68.0750745] },
    { name: 'TECNOSERVICE', provincia: 'Buenos Aires', ciudad: 'San Martín', coords: [-34.5176171, -58.5360889] },
    { name: 'Maquinas para soldaduras', provincia: 'Buenos Aires', ciudad: 'Mar del Plata', coords: [-38.0228836, -57.5745727] },
    { name: 'Todo Jardin', provincia: 'Córdoba', ciudad: 'Río Cuarto', coords: [-33.1198059, -64.3642449] },
    { name: 'Serpress', provincia: 'Buenos Aires', ciudad: 'La Plata', coords: [-34.9204948, -57.9535657] },
    { name: 'Ele-mec', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.4306657, -64.1563096] },
    { name: 'Magriña Hnos.', provincia: 'Buenos Aires', ciudad: 'Morón', coords: [-34.4765468, -58.770123] },
    { name: 'Tmc Servicios', provincia: 'Buenos Aires', ciudad: '9 de Julio', coords: [-35.6220072, -61.3619237] },
    { name: 'Grupo-GR', provincia: 'Buenos Aires', ciudad: 'San Martín', coords: [-34.5917727, -58.4944518] },
    { name: 'Powergen', provincia: 'Buenos Aires', ciudad: 'San Fernando', coords: [-34.5414278, -58.5054228] },
    { name: 'Delta Motosierras', provincia: 'Buenos Aires', ciudad: 'San Fernando', coords: [-34.4352327, -58.5610335] },
    { name: 'DISMAT', provincia: 'Chubut', ciudad: 'Puerto Madryn', coords: [-42.7762578, -65.0378495] },
    { name: 'CGM Reparaciones y Ventas', provincia: 'Buenos Aires', ciudad: 'Bahía Blanca', coords: [-38.7356204, -62.2828052] },
    { name: 'Servilux', provincia: 'Buenos Aires', ciudad: 'CABA', coords: [-34.598067, -58.4826633] },
    { name: 'Reparaciones Don Antonio', provincia: 'Chaco', ciudad: 'Resistencia', coords: [-27.4769266, -58.9925827] },
    { name: 'BP Reparaciones', provincia: 'Santa Fe', ciudad: 'Reconquista', coords: [-29.4577992, -60.2211486] },
    { name: 'Eduardo Albrecht', provincia: 'Córdoba', ciudad: 'Córdoba Capital', coords: [-31.3472971, -64.2721001] },
    { name: 'Servicios Neumáticos', provincia: 'Santa Fe', ciudad: 'Rosario', coords: [-33.0067484, -60.648467] },
    { name: 'Servicios Integrales Chaco', provincia: 'Chaco', ciudad: 'Resistencia', coords: [-27.4822998, -58.9334106] },
    { name: 'CENTRO BULONERO', provincia: 'La Pampa', ciudad: 'Santa Rosa', coords: [-35.6593239, -63.7577887] },
    { name: 'SERVITEC 2.0', provincia: 'Santa Fe', ciudad: 'Rosario', coords: [-33.0728252, -60.5786768] }
    ];
let clientLocation = null; // coordenadas del usuario (detectadas o ingresadas)
const map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/streets-v11',
  center: [-58.38, -34.6],
  zoom: 4
});

const provinciaFilter = document.getElementById('provinciaFilter');
const ciudadFilter = document.getElementById('ciudadFilter');

// Cargar provincias
const provincias = [...new Set(servicePoints.map(s => s.provincia))];
provincias.forEach(prov => {
  const opt = document.createElement('option');
  opt.value = prov;
  opt.textContent = prov;
  provinciaFilter.appendChild(opt);
});

// Al cambiar provincia, recargar ciudades
provinciaFilter.addEventListener('change', () => {
  ciudadFilter.innerHTML = '<option value="">Todas las ciudades</option>';
  const ciudades = [...new Set(servicePoints
    .filter(s => provinciaFilter.value === '' || s.provincia === provinciaFilter.value)
    .map(s => s.ciudad))];
  ciudades.forEach(ci => {
    const opt = document.createElement('option');
    opt.value = ci;
    opt.textContent = ci;
    ciudadFilter.appendChild(opt);
  });
  renderMarkers(ultimaUbicacion);
});

ciudadFilter.addEventListener('change', () => renderMarkers(ultimaUbicacion));

// Función para mostrar marcadores
function renderMarkers(clientLocation = null) {
  document.querySelectorAll('.mapboxgl-marker').forEach(m => m.remove());
  servicePoints
    .filter(s => (provinciaFilter.value === '' || s.provincia === provinciaFilter.value) &&
                 (ciudadFilter.value === '' || s.ciudad === ciudadFilter.value))
    .forEach(p => {
      const coordsInvertidos = [p.coords[1], p.coords[0]];
      const distance = clientLocation
        ? turf.distance(turf.point(clientLocation), turf.point(coordsInvertidos), { units: 'kilometers' }).toFixed(2)
        : null;
      new mapboxgl.Marker()
        .setLngLat(coordsInvertidos)
        .setPopup(new mapboxgl.Popup().setText(distance ? `${p.name} - ${distance} km` : p.name))
        .addTo(map);
    });
}

// Inicial
let ultimaUbicacion = null;
renderMarkers();

// Geocoder para ingresar dirección
const geocoder = new MapboxGeocoder({
  accessToken: mapboxgl.accessToken,
  mapboxgl: mapboxgl,
  placeholder: 'Ingresá tu dirección...',
  marker: false
});
map.addControl(geocoder);

geocoder.on('result', function(e) {
  ultimaUbicacion = e.result.center;
  new mapboxgl.Marker({ color: 'blue' })
    .setLngLat(ultimaUbicacion)
    .setPopup(new mapboxgl.Popup().setText('Tu ubicación'))
    .addTo(map);
  renderMarkers(ultimaUbicacion);
});

// Geolocalización automática del navegador
if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(position => {
    ultimaUbicacion = [position.coords.longitude, position.coords.latitude];
    map.flyTo({ center: ultimaUbicacion, zoom: 10 });
    new mapboxgl.Marker({ color: 'blue' })
      .setLngLat(ultimaUbicacion)
      .setPopup(new mapboxgl.Popup().setText('Tu ubicación actual'))
      .addTo(map);
    renderMarkers(ultimaUbicacion);
  });
}



  
  </script>
</body>
</html>
